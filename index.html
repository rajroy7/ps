<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Project Skirk</title>
<link rel="icon" href="https://ik.imagekit.io/gukc1okbd/Crystallina_Shape.webp" type="image/webp">

<!-- styles moved to styles.css for consistent theme across pages -->
<link rel="stylesheet" href="styles.css">
</head>

<body>
<!-- Mobile Sidebar (hidden by default) -->
<div class="sidebar" id="sidebar">
    <ul>
        <li><a href="index.html"><img src="icons/home.png" class="icon"><span class="text">Home</span></a></li>
        <li><a href="characters.html"><img src="icons/characters.png" class="icon"><span class="text">Characters</span></a></li>
        <li><a href="weapons.html"><img src="icons/weapons.png" class="icon"><span class="text">Weapons</span></a></li>
        <li><a href="artifacts.html"><img src="icons/artifacts.png" class="icon"><span class="text">Artifacts</span></a></li>
        <li><a href="achievements.html"><img src="icons/achievements.png" class="icon"><span class="text">Achievements</span></a></li>
        <li><a href="inventory.html"><img src="icons/inventory.png" class="icon"><span class="text">Inventory</span></a></li>
        <li><a href="enemy.html"><img src="icons/enemy.png" class="icon"><span class="text">Enemy Creatures</span></a></li>
        <li><a href="tcg.html"><img src="icons/tcg.png" class="icon"><span class="text">Genius Invokation TCG</span></a></li>
        <li><a href="abyss.html"><img src="icons/abyss.png" class="icon"><span class="text">Spiral Abyss</span></a></li>
        <li><a href="theater.html"><img src="icons/theater.png" class="icon"><span class="text">Imaginarium Theater</span></a></li>
        <li><a href="stygian.html"><img src="icons/wishes.png" class="icon"><span class="text">Stygian Onslaught</span></a></li>
        <li><a href="furnishings.html"><img src="icons/furnishings.png" class="icon"><span class="text">Furnishings</span></a></li>
        <li><a href="furnishing-set.html"><img src="icons/furnishing-set.png" class="icon"><span class="text">Furnishing Set</span></a></li>
        <li><a href="miliastra.html"><img src="icons/miliastra.png" class="icon"><span class="text">Miliastra</span></a></li>
        <li><a href="wonderland.html"><img src="icons/wonderland.png" class="icon"><span class="text">Wonderland</span></a></li>
        <li><a href="mw-set.html"><img src="icons/mw-set.png" class="icon"><span class="text">Miliastra Wonderland Set</span></a></li>
        <li><a href="mw-inventory.html"><img src="icons/mw-inventory.png" class="icon"><span class="text">Miliastra Wonderland Inventory</span></a></li>
        <li><a href="search.html"><img src="icons/search.png" class="icon"><span class="text">Search</span></a></li>
        <li><a href="diff.html"><img src="icons/diff.png" class="icon"><span class="text">Diff</span></a></li>
        <li><a href="wishes.html"><img src="icons/wishes.png" class="icon"><span class="text">Character Wishes</span></a></li>
        <li class="about-menu-item"><a href="about.html" class="about-menu-btn"><img src="icons/settings.png" class="icon"><span class="text">About Developer</span></a></li>
    </ul>
</div>

<!-- SEARCH MODAL -->
<div id="searchModal" class="search-modal">
  <div class="search-overlay" id="searchOverlay"></div>
  <div class="search-container">
    <div class="search-header">
      <input type="text" id="searchInput" class="search-input" placeholder="Search characters, weapons, artifacts...">
      <button class="search-close" id="searchClose">&times;</button>
    </div>
    <div class="search-results" id="searchResults">
      <p style="text-align: center; color: #999; margin-top: 20px;">Start typing to search...</p>
    </div>
  </div>
</div>

<!-- SETTINGS MODAL -->
<div id="settingsModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Settings</h2>
      <button class="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <!-- Main Section -->
      <div class="settings-section">
        <h3>Main</h3>
        <div class="settings-row">
          <label>Language</label>
          <select id="language">
            <option>English</option>
            <option>French</option>
            <option>German</option>
            <option>Spanish</option>
            <option>Chinese</option>
            <option>Japanese</option>
          </select>
        </div>
        <div class="settings-row">
          <label>Region</label>
          <select id="region">
            <option>Europe</option>
            <option>North America</option>
            <option>Asia</option>
            <option>South America</option>
          </select>
        </div>
        <div class="settings-row">
          <label>Twin</label>
          <select id="twin">
            <option>Male</option>
            <option>Female</option>
          </select>
        </div>
      </div>

      <!-- Talent Section -->
      <div class="settings-section">
        <h3>Talent</h3>
        <div class="settings-row">
          <label>Display Style</label>
          <select id="displayStyle">
            <option>Slider</option>
            <option>Input</option>
            <option>Dropdown</option>
          </select>
        </div>
        <div class="settings-row">
          <label>Default LVL</label>
          <select id="defaultLvl">
            <option>1</option>
            <option>5</option>
            <option>10</option>
            <option>15</option>
            <option>20</option>
          </select>
        </div>
        <div class="settings-row">
          <label>Default LVL (constellation increase)</label>
          <select id="defaultLvlConstellation">
            <option>None</option>
            <option>+1</option>
            <option>+2</option>
            <option>+3</option>
          </select>
        </div>
        <div class="settings-row">
          <label>Default Decimal Number</label>
          <select id="defaultDecimal">
            <option>Default</option>
            <option>0</option>
            <option>1</option>
            <option>2</option>
            <option>3</option>
          </select>
        </div>
        <div class="settings-row">
          <label>Add constellations info into talent description</label>
          <input type="checkbox" id="addConstellations">
        </div>
      </div>

      <!-- Other Section -->
      <div class="settings-section">
        <h3>Other</h3>
        <div class="settings-row">
          <label>Unreleased Content</label>
          <select id="unreleased">
            <option>Disable</option>
            <option>Enable</option>
          </select>
        </div>
        <div class="settings-info">
          <strong>Note:</strong> Unreleased content includes characters and weapons not yet available in the game. Enable this to preview upcoming content.
        </div>
      </div>
    </div>
    <div class="modal-footer">
        <button id="saveSettingsBtn" class="save-btn">Save</button>
      </div>
  </div>
</div>

<!-- NAVBAR -->
<div class="main-content">
<nav>
  <button class="hamburger" id="hamburger">
    <span></span>
    <span></span>
    <span></span>
  </button>
  <div class="logo">PROJECT SKIRK</div>
  <div class="nav-links">
    <a href="index.html">Home</a>
    <a href="characters.html">Characters</a>
    <a href="weapons.html">Weapons</a>
    <a href="artifacts.html">Artifacts</a>
    <a href="achievements.html">Achievements</a>
    <a href="inventory.html">Inventory</a>
    <button class="nav-search-btn" id="searchBtn" title="Search">
      <img src="icons/search.png" alt="Search" class="search-icon">
    </button>
    <button class="nav-settings-btn" id="topSettingsBtn" title="Settings">
      <img src="icons/settings.png" alt="Settings" class="settings-icon">
    </button>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <img src="https://ik.imagekit.io/gukc1okbd/Crystallina_Shape.webp">
  <h1>Project Skirk</h1>
  <p>A fan database for Genshin Impact players.</p>
</section>

<!-- COUNTDOWN -->
<div class="countdown-wrapper">
  <h2 class="countdown-title">Time Until Next Update</h2>
  <div class="countdown">
    <div class="time-box"><span id="days">00</span><p>Days</p></div>
    <div class="time-box"><span id="hours">00</span><p>Hrs</p></div>
    <div class="time-box"><span id="minutes">00</span><p>Mins</p></div>
    <div class="time-box"><span id="seconds">00</span><p>Secs</p></div>
  </div>
</div>

<!-- CARDS -->
<section class="cards">

  <a href="characters.html" class="card-link">
    <div class="card character-card">
      <img src="https://ik.imagekit.io/gukc1okbd/images.jpeg" class="cycling-card-img-blurred" id="charactersCardImgBlurred">
      <div class="card-content">
        <h3>Characters</h3>
        <p>Explore builds, abilities and meta insights.</p>
      </div>
    </div>
  </a>

  <a href="weapons.html" class="card-link">
    <div class="card weapons-card">
      <img src="https://ik.imagekit.io/gukc1okbd/Weapon_Azurelight_2nd.webp" class="cycling-card-img-fade" id="weaponsCardImg">
      <div class="card-content">
        <h3>Weapons</h3>
        <p>Complete weapon guides and rankings.</p>
      </div>
    </div>
  </a>

  <a href="artifacts.html" class="card-link">
    <div class="card artifacts-card">
      <img src="https://ik.imagekit.io/gukc1okbd/UI_RelicIcon_15040_4.png" class="cycling-card-img-fade" id="artifactsCardImg">
      <div class="card-content">
        <h3>Artifacts</h3>
        <p>Best sets and optimization strategies.</p>
      </div>
    </div>
  </a>

</section>

<!-- ADDITIONAL CARDS -->
<section class="cards-small">

  <a href="abyss.html" class="card-link">
    <div class="card abyss-card">
      <img src="https://ik.imagekit.io/gukc1okbd/Domain_Spiral_Abyss_Abyssal_Moon_Spire.webp" class="small-card-img">
      <div class="card-content">
        <h3>Spiral Abyss</h3>
        <p>Challenging dungeons and rewards.</p>
      </div>
    </div>
  </a>

  <a href="theater.html" class="card-link">
    <div class="card theater-card">
      <img src="https://ik.imagekit.io/gukc1okbd/Namecard_Background_Achievement_Feline_Fortune.webp" class="small-card-img">
      <div class="card-content">
        <h3>Imaginarium Theater</h3>
        <p>Strategic combat scenarios.</p>
      </div>
    </div>
  </a>

  <a href="stygian.html" class="card-link">
    <div class="card stygian-card">
      <img src="https://ik.imagekit.io/gukc1okbd/5apqeyf8s6yf1.webp" class="small-card-img">
      <div class="card-content">
        <h3>Stygian Onslaught</h3>
        <p>Limited-time event challenges.</p>
      </div>
    </div>
  </a>

</section>

<!-- UPCOMING BIRTHDAYS -->
<section class="upcoming-birthdays-section">
  <h2 style="text-align:center; color:#7c5cff; margin-bottom:20px;">Coming Birthdays</h2>
  <div id="upcomingBirthdays" class="birthdays-container">
    <p style="text-align:center; opacity:0.6;">Loading upcoming birthdays...</p>
  </div>
</section>

<!-- FOOTER -->
<div class="footer">

  <h2>PROJECT SKIRK</h2>

  <p>
    Project Skirk is a fan-made database for 
    <strong>Genshin Impact</strong>. <br>
    Not affiliated with HoYoverse.
  </p>

  <div class="footer-divider"></div>

  <p class="footer-credit">Created by <strong>Raj Roy</strong></p>
  <p class="footer-memorial">In memory of <strong>homdgcat</strong> and <strong>hakush.in</strong></p>

  <div class="footer-links">
    <a href="index.html">Home</a>
    <a href="about.html">About Developer</a>
    <a href="https://instagram.com/raj_7si" target="_blank">Instagram</a>
  </div>

  <div class="footer-bottom">
    Â© 2026 Project Skirk | All Rights Reserved
  </div>

</div>

</div>

<script>
var updateDate = new Date("March 2, 2026 15:30:00").getTime();

var x = setInterval(function() {

  var now = new Date().getTime();
  var distance = updateDate - now;

  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);

  document.getElementById('days').innerHTML = days;
  document.getElementById('hours').innerHTML = hours;
  document.getElementById('minutes').innerHTML = minutes;
  document.getElementById('seconds').innerHTML = seconds;

  if (distance < 0) {
    clearInterval(x);
    document.querySelector('.countdown').innerHTML = "Update Released!";
  }

}, 1000);
</script>
<script>
// Load upcoming birthdays from characters.json
document.addEventListener('DOMContentLoaded', () => {
  loadUpcomingBirthdays();
});

function loadUpcomingBirthdays() {
  fetch('characters.json')
    .then(r => r.json())
    .then(characters => {
      getUpcomingBirthdays(characters).then(birthdays => {
        displayBirthdays(birthdays);
      });
    })
    .catch(err => {
      console.error('Error loading birthdays:', err);
      document.getElementById('upcomingBirthdays').innerHTML = '<p style="text-align:center; opacity:0.6;">Unable to load upcoming birthdays</p>';
    });
}

async function getUpcomingBirthdays(characters) {
  const today = new Date(2026, 1, 27); // Feb 27, 2026
  const upcomingBirthdays = [];

  // Helper function to check if a year is a leap year
  function isLeapYear(year) {
    return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
  }

  // Load consolidated characters-data.json for birthday info
  try {
    const response = await fetch('characters-data.json');
    const charData = await response.json();

    for (const char of characters) {
      if (!char.id || !charData[char.id]) continue;
      
      const data = charData[char.id];
      const birthday = data.birthday;
      
      if (!birthday || !Array.isArray(birthday) || birthday.length < 2) continue;
      
      let [month, day] = birthday;
      
      // Handle Feb 29 in non-leap years - adjust to Feb 28
      if (month === 2 && day === 29 && !isLeapYear(2026)) {
        day = 28;
      }
      
      // Calculate next birthday
      let nextBirthday = new Date(2026, month - 1, day);
      
      // If birthday has already passed this year, schedule for next year
      if (nextBirthday < today) {
        // Also check leap year for next year when advancing
        if (month === 2 && day === 29 && birthday[1] === 29 && !isLeapYear(2027)) {
          nextBirthday = new Date(2027, 1, 28); // Feb 28 in non-leap 2027
        } else {
          nextBirthday = new Date(2027, month - 1, day);
        }
      }
      
      // Only show birthdays within next 30 days
      const daysUntil = Math.floor((nextBirthday - today) / (1000 * 60 * 60 * 24));
      
      if (daysUntil >= 0 && daysUntil <= 30) {
        upcomingBirthdays.push({
          id: char.id,
          name: char.name,
          image: char.image,
          birthMonth: month,
          birthDay: day,
          nextBirthday: nextBirthday,
          daysUntil: daysUntil
        });
      }
    }
    
    // Sort by days until birthday
    upcomingBirthdays.sort((a, b) => a.daysUntil - b.daysUntil);
    
  } catch (err) {
    console.error('Error loading character data:', err);
  }

  return upcomingBirthdays;
}

function displayBirthdays(birthdays) {
  const container = document.getElementById('upcomingBirthdays');
  
  if (!birthdays || birthdays.length === 0) {
    container.innerHTML = '<p style="text-align:center; opacity:0.6;">No upcoming birthdays in the next 30 days</p>';
    return;
  }
  
  let html = '';
  // Only display the first 5 birthdays
  birthdays.slice(0, 5).forEach(birthday => {
    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    const dateStr = `${monthNames[birthday.birthMonth - 1]}/${birthday.birthDay}`;
    
    html += `
      <a href="character?id=${birthday.id}" class="birthday-card" title="${birthday.name}">
        <img src="${birthday.image}" alt="${birthday.name}" onerror="this.src='https://via.placeholder.com/80'">
        <div class="date">${dateStr}</div>
        <div class="name">${birthday.name}</div>
      </a>
    `;
  });
  
  container.innerHTML = html;
}
</script>
<script src="script.js"></script>
</body>
</html>